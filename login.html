<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TrustFin - ë¡œê·¸ì¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="common.js"></script>
</head>
<body class="text-gray-800 dark:text-gray-100 font-sans select-none transition-colors duration-300 bg-black">
    <div id="app-content" class="min-h-screen bg-gray-50 dark:bg-gray-900 transition-all duration-300 ease-out origin-top flex flex-col justify-center items-center p-6 py-12">
    <div class="max-w-md w-full space-y-8">
        <div class="text-center">
            <h2 class="text-3xl font-bold text-gray-900 dark:text-white">TrustFin ì²´í—˜í•˜ê¸°</h2>
            <p class="mt-2 text-gray-500 dark:text-gray-400">ì²´í—˜í•  í˜ë¥´ì†Œë‚˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
        </div>
        
        <div class="space-y-4">
            <!-- Persona 1 -->
            <button onclick="selectPersona(1)" class="w-full relative bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg border border-gray-100 dark:border-gray-700 transition-all duration-300 group text-left hover:border-blue-500 dark:hover:border-blue-400 hover:shadow-xl active:scale-[0.98]">
                <!-- Header -->
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-12 h-12 rounded-full bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center text-2xl shadow-sm">ğŸ‘¨</div>
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-lg font-bold text-gray-900 dark:text-white">ê¹€ì² ìˆ˜ <span class="text-sm font-normal text-gray-500 dark:text-gray-400 ml-1">29ì„¸</span></h3>
                                <p class="text-xs text-blue-600 dark:text-blue-400 font-bold uppercase tracking-wide">Social Newcomer</p>
                            </div>
                            <span class="text-[10px] font-bold bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 px-2 py-1 rounded-full">01</span>
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="grid grid-cols-2 gap-2 mb-4">
                    <div class="bg-gray-50 dark:bg-gray-700/30 p-3 rounded-xl">
                        <p class="text-[10px] text-gray-500 dark:text-gray-400 mb-0.5">ì—°ì†Œë“</p>
                        <p class="text-sm font-bold text-gray-900 dark:text-white">2,500ë§Œì›</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/30 p-3 rounded-xl">
                        <p class="text-[10px] text-gray-500 dark:text-gray-400 mb-0.5">ì‹ ìš©ì ìˆ˜</p>
                        <p class="text-sm font-bold text-gray-900 dark:text-white">740ì </p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/30 p-3 rounded-xl">
                        <p class="text-[10px] text-gray-500 dark:text-gray-400 mb-0.5">ì´ ìì‚°</p>
                        <p class="text-sm font-bold text-gray-900 dark:text-white">300ë§Œì›</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/30 p-3 rounded-xl">
                        <p class="text-[10px] text-gray-500 dark:text-gray-400 mb-0.5">DSR</p>
                        <p class="text-sm font-bold text-gray-900 dark:text-white">15.2%</p>
                    </div>
                </div>

                <!-- Persona DNA -->
                <div class="bg-gray-50 dark:bg-gray-700/30 rounded-2xl p-3 border border-gray-100 dark:border-gray-700 text-left">
                    <div class="flex items-center gap-1.5 mb-2">
                        <i data-lucide="fingerprint" class="w-3.5 h-3.5 text-gray-500 dark:text-gray-400"></i>
                        <span class="text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide">Persona DNA</span>
                    </div>
                    <div class="flex flex-wrap gap-1.5">
                        <span class="text-[10px] font-medium bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-md border border-gray-200 dark:border-gray-500">ğŸ“ ëŒ€ì¡¸ ì‹ ì…</span>
                        <span class="text-[10px] font-medium bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-md border border-gray-200 dark:border-gray-500">ğŸ“‰ ê¸ˆìœµ ì´ë ¥ ë¶€ì¡±</span>
                        <span class="text-[10px] font-medium bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-md border border-gray-200 dark:border-gray-500">ğŸ’³ ì²´í¬ì¹´ë“œ ìœ„ì£¼</span>
                    </div>
                    <div class="mt-3 pt-2 border-t border-gray-200 dark:border-gray-600">
                        <div class="flex items-start gap-1.5">
                            <i data-lucide="database" class="w-3 h-3 text-gray-400 mt-0.5 flex-shrink-0"></i>
                            <div>
                                <p class="text-[10px] font-bold text-gray-500 dark:text-gray-400">Data Source: ê³ ìš©ë…¸ë™ë¶€ 2025</p>
                                <p class="text-[10px] text-gray-400 dark:text-gray-500 leading-tight mt-0.5">ìµœì €ì‹œê¸‰(10,030ì›) ì—°ë´‰ í™˜ì‚°, ìì‚° í˜•ì„± ì´ˆê¸° ë‹¨ê³„ ë°˜ì˜</p>
                            </div>
                        </div>
                    </div>
                </div>
            </button>

            <!-- Persona 2 -->
            <button onclick="selectPersona(2)" class="w-full relative bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg border border-gray-100 dark:border-gray-700 transition-all duration-300 group text-left hover:border-purple-500 dark:hover:border-purple-400 hover:shadow-xl active:scale-[0.98]">
                <!-- Header -->
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-12 h-12 rounded-full bg-purple-50 dark:bg-purple-900/30 flex items-center justify-center text-2xl shadow-sm">ğŸ‘©</div>
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-lg font-bold text-gray-900 dark:text-white">ì´ì˜í¬ <span class="text-sm font-normal text-gray-500 dark:text-gray-400 ml-1">32ì„¸</span></h3>
                                <p class="text-xs text-purple-600 dark:text-purple-400 font-bold uppercase tracking-wide">Career Pro</p>
                            </div>
                            <span class="text-[10px] font-bold bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 px-2 py-1 rounded-full">02</span>
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="grid grid-cols-2 gap-2 mb-4">
                    <div class="bg-gray-50 dark:bg-gray-700/30 p-3 rounded-xl">
                        <p class="text-[10px] text-gray-500 dark:text-gray-400 mb-0.5">ì—°ì†Œë“</p>
                        <p class="text-sm font-bold text-gray-900 dark:text-white">5,200ë§Œì›</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/30 p-3 rounded-xl">
                        <p class="text-[10px] text-gray-500 dark:text-gray-400 mb-0.5">ì‹ ìš©ì ìˆ˜</p>
                        <p class="text-sm font-bold text-gray-900 dark:text-white">950ì </p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/30 p-3 rounded-xl">
                        <p class="text-[10px] text-gray-500 dark:text-gray-400 mb-0.5">ì´ ìì‚°</p>
                        <p class="text-sm font-bold text-gray-900 dark:text-white">1ì–µ 2,000ë§Œì›</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700/30 p-3 rounded-xl">
                        <p class="text-[10px] text-gray-500 dark:text-gray-400 mb-0.5">DSR</p>
                        <p class="text-sm font-bold text-gray-900 dark:text-white">24.8%</p>
                    </div>
                </div>

                <!-- Persona DNA -->
                <div class="bg-gray-50 dark:bg-gray-700/30 rounded-2xl p-3 border border-gray-100 dark:border-gray-700 text-left">
                    <div class="flex items-center gap-1.5 mb-2">
                        <i data-lucide="fingerprint" class="w-3.5 h-3.5 text-gray-500 dark:text-gray-400"></i>
                        <span class="text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide">Persona DNA</span>
                    </div>
                    <div class="flex flex-wrap gap-1.5">
                        <span class="text-[10px] font-medium bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-md border border-gray-200 dark:border-gray-500">ğŸ’¼ 5ë…„ì°¨ ëŒ€ë¦¬</span>
                        <span class="text-[10px] font-medium bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-md border border-gray-200 dark:border-gray-500">ğŸ“ˆ ìš°ëŸ‰ ì‹ ìš©</span>
                        <span class="text-[10px] font-medium bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-md border border-gray-200 dark:border-gray-500">ğŸ’³ ì‹ ìš©ì¹´ë“œ ìœ„ì£¼</span>
                    </div>
                    <div class="mt-3 pt-2 border-t border-gray-200 dark:border-gray-600">
                        <div class="flex items-start gap-1.5">
                            <i data-lucide="database" class="w-3 h-3 text-gray-400 mt-0.5 flex-shrink-0"></i>
                            <div>
                                <p class="text-[10px] font-bold text-gray-500 dark:text-gray-400">Data Source: í†µê³„ì²­ 2023</p>
                                <p class="text-[10px] text-gray-400 dark:text-gray-500 leading-tight mt-0.5">30ëŒ€ í‰ê·  ìˆœìì‚°(1.2ì–µ) ë° ê²½ë ¥ì§ ì„ê¸ˆ ìƒìŠ¹ ë°˜ì˜</p>
                            </div>
                        </div>
                    </div>
                </div>
            </button>
        </div>

        <div class="relative flex py-2 items-center">
            <div class="flex-grow border-t border-gray-200 dark:border-gray-700"></div>
            <span class="flex-shrink-0 mx-4 text-gray-400 text-xs font-medium">OR</span>
            <div class="flex-grow border-t border-gray-200 dark:border-gray-700"></div>
        </div>

        <div class="text-center">
            <button onclick="selectGuest()" class="w-full flex items-center justify-center px-8 py-4 text-sm font-bold text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-sm hover:shadow-md hover:text-deepBlue dark:hover:text-blue-400 hover:border-blue-100 dark:hover:border-blue-900 transition-all group">
                <span class="mr-2 text-lg">ğŸ‘»</span>
                <span>ê²ŒìŠ¤íŠ¸ë¡œ ë‘˜ëŸ¬ë³´ê¸°</span>
                <i data-lucide="arrow-right" class="w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"></i>
            </button>
        </div>
    </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 z-50 hidden flex flex-col items-center justify-center bg-black/60 backdrop-blur-sm transition-opacity duration-300 opacity-0">
        <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-2xl flex flex-col items-center transform transition-transform scale-95">
            <div id="loadingIconContainer" class="w-16 h-16 bg-blue-50 dark:bg-blue-900/30 rounded-full flex items-center justify-center mb-4 text-deepBlue dark:text-blue-400">
                <i data-lucide="loader-2" class="w-8 h-8 animate-spin"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">ë¡œê·¸ì¸ ì¤‘</h3>
            <p class="text-sm text-gray-500 dark:text-gray-400 text-center">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initTheme(); // common.jsì˜ í…Œë§ˆ ì´ˆê¸°í™” í•¨ìˆ˜ í˜¸ì¶œ
            if (window.lucide) window.lucide.createIcons();
        });

        function selectPersona(id) {
            // ë¡œë”© ì˜¤ë²„ë ˆì´ í‘œì‹œ
            const overlay = document.getElementById('loadingOverlay');
            const content = overlay.querySelector('div');
            const iconContainer = document.getElementById('loadingIconContainer');
            
            // í¼ì†Œë‚˜ë³„ í…Œë§ˆ ìƒ‰ìƒ ì ìš©
            if (id === 2) {
                iconContainer.className = "w-16 h-16 bg-purple-50 dark:bg-purple-900/30 rounded-full flex items-center justify-center mb-4 text-electricPurple dark:text-purple-400";
            } else {
                iconContainer.className = "w-16 h-16 bg-blue-50 dark:bg-blue-900/30 rounded-full flex items-center justify-center mb-4 text-deepBlue dark:text-blue-400";
            }
            
            overlay.classList.remove('hidden');
            if (window.lucide) window.lucide.createIcons();
            
            requestAnimationFrame(() => {
                overlay.classList.remove('opacity-0');
                content.classList.remove('scale-95');
                content.classList.add('scale-100');
            });

            // 1ì´ˆ í›„ ë¡œê·¸ì¸ ì²˜ë¦¬
            setTimeout(() => {
                processLogin(id);
            }, 1000);
        }

        function processLogin(id) {
            let persona = {};
            if (id === 1) {
                persona = {
                    id: 'persona1',
                    name: 'ê¹€ì² ìˆ˜', age: 29, job: 'regular', income: 2500, creditScore: 740, dsr: 15.2,
                    points: 0,
                    accounts: [
                        { bank: 'êµ­ë¯¼ì€í–‰', balance: 3000000, accountNumber: '123-456-7890' }
                    ],
                    cards: [
                        { bank: 'í˜„ëŒ€ìºí”¼íƒˆ', name: 'í˜„ëŒ€ì¹´ë“œ M BOOST', number: '1234', amount: 850000 }
                    ],
                    loanCount: 0
                };
            } else {
                persona = {
                    id: 'persona2',
                    name: 'ì´ì˜í¬', age: 32, job: 'regular', income: 5200, creditScore: 950, dsr: 24.8,
                    points: 0,
                    accounts: [
                        { bank: 'êµ­ë¯¼ì€í–‰', balance: 80000000, accountNumber: '123-456-1111' },
                        { bank: 'ì‹ í•œì€í–‰', balance: 35000000, accountNumber: '110-222-333333' },
                        { bank: 'í•˜ë‚˜ì€í–‰', balance: 5000000, accountNumber: '333-444-555555' }
                    ],
                    cards: [
                        { bank: 'ì‹ í•œì€í–‰', name: 'ì‹ í•œì¹´ë“œ Deep Dream', number: '5678', amount: 1200000 },
                        { bank: 'ì‚¼ì„±ì¹´ë“œ', name: 'taptap O', number: '9012', amount: 450000 }
                    ],
                    loanCount: 1
                };
            }
            
            // 1. ì„ íƒí•œ í˜ë¥´ì†Œë‚˜ ì €ì¥
            localStorage.setItem('trustFinPersona', JSON.stringify(persona));
            
            // 2. ì´ì „ ë°ì´í„° ì´ˆê¸°í™” (ì •í™•í•œ ìì‚° ë° ìƒíƒœ ë°˜ì˜ì„ ìœ„í•´)
            localStorage.removeItem('trustFinUserData'); // ëŒ€ì¶œ ì…ë ¥ ì •ë³´
            localStorage.removeItem('trustFinNotifications'); // ì•Œë¦¼
            localStorage.removeItem('trustFinTransactions'); // ê±°ë˜ ë‚´ì—­
            localStorage.removeItem('selectedCard'); // ì„ íƒëœ ì¹´ë“œ
            localStorage.removeItem('newDepositAmount'); // ì‹ ê·œ ì…ê¸ˆ íš¨ê³¼ í”Œë˜ê·¸
            localStorage.removeItem('trustFinMyLoans'); // ê¸°ì¡´ ëŒ€ì¶œ ë‚´ì—­ ì´ˆê¸°í™”

            // í¼ì†Œë‚˜ 2ì˜ ê²½ìš° ê¸°ì¡´ ëŒ€ì¶œ ë‚´ì—­ ì„¤ì •
            if (id === 2) {
                const defaultLoans = [{
                    id: 'existing_loan_1',
                    personaId: 'persona2',
                    bankName: 'ìš°ë¦¬ì€í–‰',
                    productName: 'ì§ì¥ì¸ ì‹ ìš©ëŒ€ì¶œ',
                    status: 'active',
                    timestamp: Date.now() - 86400000 * 30, // 30ì¼ ì „
                    depositAccount: '123-456-1111'
                }];
                localStorage.setItem('trustFinMyLoans', JSON.stringify(defaultLoans));
            }
            
            window.location.href = 'home.html';
        }

        function selectGuest() {
            // ë¡œë”© ì˜¤ë²„ë ˆì´ í‘œì‹œ
            const overlay = document.getElementById('loadingOverlay');
            const content = overlay.querySelector('div');
            
            overlay.classList.remove('hidden');
            if (window.lucide) window.lucide.createIcons();
            
            requestAnimationFrame(() => {
                overlay.classList.remove('opacity-0');
                content.classList.remove('scale-95');
                content.classList.add('scale-100');
            });

            // 1ì´ˆ í›„ ê²ŒìŠ¤íŠ¸ ë¡œê·¸ì¸ ì²˜ë¦¬
            setTimeout(() => {
                processGuestLogin();
            }, 1000);
        }

        function processGuestLogin() {
            const guestPersona = {
                id: 'guest',
                name: 'ê²ŒìŠ¤íŠ¸',
                age: 0,
                job: 'unemployed',
                income: 0,
                creditScore: 0,
                accounts: []
            };
            
            localStorage.setItem('trustFinPersona', JSON.stringify(guestPersona));
            localStorage.removeItem('trustFinUserData');
            localStorage.removeItem('trustFinNotifications');
            localStorage.removeItem('trustFinTransactions');
            localStorage.removeItem('selectedCard');
            localStorage.removeItem('newDepositAmount');
            
            window.location.href = 'home.html';
        }
    </script>
</body>
</html>